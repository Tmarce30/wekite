Spot.destroy_all

spot = Spot.new(
  name: 'Saint-Laurent-du-Var',
  address: '1819 Route du Bord de Mer 06700 Saint-Laurent-du-Var France',
  description: "You'll find flatwater freeride conditions in Saint-Laurent-du-Var in an easterly or southeasterly when the airport shelters the estuary mouth from waves. Westerly/southwesterly mistral conditions are reserved for experienced riders as the airport and breakwaters become a hazard. A narrow beach lined with palm trees make launching and landing the kite challenging for beginners.
  Access to the spot next to the Cap 3000 shopping centre and that's where you’ll find the best parking. You may need a thicker wetsuit here (or at least an extra mm) as the water from the Var estuary is colder than neighbouring spots.",
  avatar_url: "http://res.cloudinary.com/dkrjlrpn6/image/upload/v1511448298/Screen_Shot_2017-11-23_at_8.43.35_AM_h3k1ck.png")
spot.save!

spot = Spot.new(
  name: 'Lac de Serre-Ponçon',
  address: "Office de Tourisme d'Embrun Place Gén Dosse 05200 Embrun France",
  description: "With its ultra-reliable wind, warm water and spectacular setting, the huge Lac de Serre Ponçon is a viable alternative to the Mediterranean for kitesurfers in the South of France. The best time of year to kitesurf in Serre Poncon is between March and July. The mornings are calm and the lake is like a bottle – perfect for wakeboarding or supping.",
  avatar_url: "http://res.cloudinary.com/dkrjlrpn6/image/upload/v1511449168/Screen_Shot_2017-11-23_at_8.42.56_AM_dehmsx.png")
spot.save!

spot = Spot.new(
  name: 'Presqu’île de Giens',
  address: "Office de Tourisme d'Hyères Rotonde du Park Hôtel Avenue de Belgique, 83400 Hyères France",
  description: "In a south westerly or if the Mistral is blowing, l’Alamanarre is onshore with waves the whole length of the beach. In an easterly, the water’s completely flat. These are the two best conditions for the spot. You just need to be confident up-wind if you're heading out in an easterly as this is offshore. Mistral conditions can produce some powerful gusts, but you know you can always get back to the beach.",
  avatar_url: "http://res.cloudinary.com/dkrjlrpn6/image/upload/v1511449168/Screen_Shot_2017-11-23_at_8.42.37_AM_uhgotq.png")
spot.save!

spot = Spot.new(
  name: 'La Ciotat',
  address: "Office de Tourisme de La Ciotat Boulevard Anatole France 13600 La Ciotat France",
  description: "Superb spot in a strong southerly wind with some nice waves in front of the breakwaters. You need to be confident launching, landing and staying upwind as the road runs parallel to the beach and there’s not a lot of room to set up. Kitesurfing’s banned within 300 m of the beach during the summer holiday season, but local kitesurf schools can provide boat support.",
  avatar_url: "http://res.cloudinary.com/dkrjlrpn6/image/upload/v1511449168/Screen_Shot_2017-11-23_at_8.42.21_AM_hfsghf.png")
spot.save!

spot = Spot.new(
  name: 'L’Etang de Berre',
  address: "Office de Tourisme de Marignane Cours Mirabeau 13700 Marignane France",
  description: "You’re almost guaranteed a good kitesurfing session at L’Etang de Berre because the wind will blow here from multiple directions. It’s a lagoon, so it’s popular with beginners and it’s the spot to head to if the Med gets too rough. Le Jaï beach is a spit of sand that stretches for 5 km from Marignane to Châteauneuf-les-Martigues dividing the Etang de Berre from the Etang de Bolmon nature reserve. Kiting is restricted to the Etang de Berre side.",
  avatar_url: "http://res.cloudinary.com/dkrjlrpn6/image/upload/v1511449168/Screen_Shot_2017-11-23_at_8.42.00_AM_n1f6if.png")
spot.save!

spot = Spot.new(
  name: 'Carro',
  address: "Office de Tourisme de Martigues Rond-point de l’Hôtel-de-Ville 13500 Martigues France",
  description: "The spot's location at the far end of a rocky point also means that there's some current to be aware of. A buoy marks the entrance to the harbour and makes a good marker when you're tracking off-shore. When the conditions line up, the best kitesurfers can have an epic session. Launching and landing a kite along the rocky shore is a precarious operation.",
  avatar_url: "http://res.cloudinary.com/dkrjlrpn6/image/upload/v1511464626/Mauritius---Beaches---Tropical-beach-xlarge_ue299o.jpg")
spot.save!

spot = Spot.new(
  name: 'Beauduc',
  address: "Office de Tourisme de Salin-de-Giraud Mairie annexe Boulevard de la Gare, 13129 Salin-de-Giraud France",
  description: "Beauduc’s u-shaped bay, reliable south-westerly thermal and consistent northerly Mistral means you can kite in almost any wind direction. Only a straight easterly blows directly off-shore. Low lying land across the salt flats means the wind is uninterrupted and not too gusty. The Mistral blows cross-shore and will kick up some small waves if it’s blowing with enough force, which it often is.",
  avatar_url: "http://res.cloudinary.com/dkrjlrpn6/image/upload/v1511449168/Screen_Shot_2017-11-23_at_8.39.32_AM_pe4pxb.png")
spot.save!

spot = Spot.new(
  name: 'L’Espiguette',
  address: "Office de Tourisme du Grau-du-Roi 30 Rue Michel Redares 30240 Le Grau-du-Roi France",
  description: "L’Espiguette is an excellent spot with straightforward kiting conditions and plenty of space along the 10 km beach. Being an official kite zone, it can get busy in the summer. L’Espiguette is ideal for kitesurfing. The beach is immense with no obstructions making it suitable for kitesurfers of all abilities. The beach is 10 km long and 6-700 m wide; plenty of space to rig up and get to grips with flying your kite.",
  avatar_url: "http://res.cloudinary.com/dkrjlrpn6/image/upload/v1511464626/iledeporquerolles_xv9sa9.jpg")
spot.save!

spot = Spot.new(
  name: 'Etang de Thau',
  address: "Office de tourisme de Sète 60, Grande Rue Mario Roustan 34200 Sète",
  description: "Pont Levis at the Sète end of the Etang de Thau is regarded as one of the top spots around Montpellier. The spot works in multiple wind directions and apart from the centre of the lagoon where there's some chop, the water's perfectly flat. You can kite safely if every wind direction except easterly when the Mont St Clair becomes a hazard. In a north-westerly, it's directly on-shore, so you need to be confident as there numerous hazards into the wind, which is generally pretty strong.",
  avatar_url: "http://res.cloudinary.com/dkrjlrpn6/image/upload/v1511464626/adr832-waterfront-property-rayol-canadel-var-south-of-france-private-access-to-the-beach-00000523-00005873-lg_bdsssl.jpg")
spot.save!

spot = Spot.new(
  name: 'Leucate-La Franqui',
  address: "Office de tourisme de Leucate Espace Henry de Monfreid Port Leucate, 11370 Leucate France",
  description: "Les Coussoules is recognised as one of the best kitesurfing spots in Europe. The super-reliable Tramontana wind provides superb conditions for wind sports and it's here that the annual 'Mondial du Vent' takes place. There are spots for every level of rider and there's loads of variety - cruising, freeride, freestyle, whatever you're into.",
  avatar_url: "http://res.cloudinary.com/dkrjlrpn6/image/upload/v1511449167/Screen_Shot_2017-11-23_at_8.38.51_AM_i5ooyt.png")
spot.save!

spot = Spot.new(
  name: 'Jericoacoara',
  address: "R. da Dunas, 99 - Jericoacoara, Jijoca de Jericoacoara - CE, 62598-973, Brésil",
  description: "Wind in Jeri itself,  in strong and gusty, and blows mainly side-offshore. Locals kite surf in Jericoacoara village, but its only suitable experienced kitesurfer. ",
  avatar_url: "http://res.cloudinary.com/dkrjlrpn6/image/upload/v1511551775/jeri-1_m5fgv7.jpg")
spot.save!

spot = Spot.new(
  name: 'Dakhla',
  address: "Dakhla 73000",
  description: "Dakhla is a famous kitesurfing destination now. Located at the very South of the Moroccan shore, it has gotten well developed in the past few years. Surrounded by miles and miles of Sahara Desert dunes, Dakhla provides a super flat lagoon in an incredible scenery, which is as good for freestylers and speed amateurs as it is for beginners.",
  avatar_url: "http://res.cloudinary.com/dkrjlrpn6/image/upload/v1511551775/ile-Herne-dakhla-office-tourisme-maroc-office-tourisme-dakhla-tourisme-dakhla-tourisme-maroc-sejour-maroc-visiter-maroc-voyager-maroc-tourisme-maroc_gdx1wj.jpg")
spot.save!

spot = Spot.new(
  name: 'Tofino',
  address: "542 Campbell St, Tofino, BC V0R 2Z0",
  description: "The Tofino kitesurfing coastline extending south to Ucluelet offers a really great variety kitesurfing conditions. It’s mostly beach-break setups, but you’ll find a bit of everything when it comes to wave kiting: Onshore, offshore, side-shore, lefts, rights, rainy, sunny, smooth and steady, gusty and stormy, small and snappy waves, very big and slopey waves, and soft & mushy waves.",
  avatar_url: "http://res.cloudinary.com/dkrjlrpn6/image/upload/v1511551775/5_8_k21w1g.jpg")
spot.save!

# Adding photos to spots
spots = Spot.all

spots.each do |spot|
  #build url
  url = "https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=#{spot.latitude},#{spot.longitude}&radius=200&key=#{ENV['GOOGLE_API_SERVER_KEY']}"

  #make json request
  json = open(url).read
  json = JSON.parse(json)
  #get first result
  results = json["results"].reject {|result| result["photos"].nil? }
  result = results.first
  #get first photo
  unless result.nil?

    result["photos"].each_with_index do |photo, i|
      photo_reference = photo["photo_reference"]

      photo_url = "https://maps.googleapis.com/maps/api/place/photo?maxwidth=950&photoreference=#{photo_reference}&key=#{ENV['GOOGLE_API_SERVER_KEY']}"
      if i == 0 && spot.avatar.nil?
        spot.avatar_url = photo_url
      else
        picture = Picture.new(photo_urls: [photo_url])
        picture.spot = spot
        picture.save!
      end
    end

    spot.save!
  end
end
